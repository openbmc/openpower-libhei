#include "simulator.hpp"

START_TEST_CASE(SampleTestSet1)

CHIP(proc0, 0x01234567)
CHIP(memb0, 0x00112233)
CHIP(memb1, 0x00112233)

CHIP(proc1, 0x01234567)
CHIP(memb2, 0x00112233)
CHIP(memb3, 0x00112233)

START_ITERATION

REG_SCOM(proc0, 0xFF000000, 0x2000000000000000) // GLOBAL_FIR[2]
REG_SCOM(proc0, 0x00FF0000, 0x0800000000000000) // CHIPLET_FIR[4]
REG_SCOM(proc0, 0x00FF0001, 0xF7FFFFFFFFFFFFFF) // CHIPLET_FIR_MSK
REG_SCOM(proc0, 0x0000FF00, 0x8020000000000000) // LOCAL_FIR[10]
                                                // (bit 0 is masked)
REG_SCOM(proc0, 0x0000FF01, 0xFFDFFFFFFFFFFFFF) // LOCAL_FIR_MSK
REG_SCOM(proc0, 0x0000FF02, 0x8020000000000000) // LOCAL_FIR_CNFG

REG_SCOM(memb1, 0xFF000000, 0x8000000000000000) // GLOBAL_FIR[0]
REG_SCOM(memb1, 0x00FF0000, 0x8000000000000000) // CHIPLET_FIR[0]
REG_SCOM(memb1, 0x00FF0001, 0x7FFFFFFFFFFFFFFF) // CHIPLET_FIR_MSK

REG_IDSCOM(memb1, 0x800000000000FF00, 0xA000) // LOCAL_FIR[48,50]
REG_IDSCOM(memb1, 0x800000000000FF01, 0xFFFF) // LOCAL_FIR_MSK
REG_IDSCOM(memb1, 0x800000000000FF02, 0xA000) // LOCAL_FIR_CNFG

EXP_SIG(proc0, 0x1111, 0, 10, CHECKSTOP)
EXP_SIG(memb1, 0x2222, 0, 48, RECOVERABLE)
EXP_SIG(memb1, 0x2222, 0, 50, RECOVERABLE)

END_ITERATION

END_TEST_CASE
